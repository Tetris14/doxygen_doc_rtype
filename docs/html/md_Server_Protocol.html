<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>R-Type: Protocol Overview</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">R-Type<span id="projectnumber">&#160;0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Protocol Overview </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The Protocol is composed of two parts, the TCP protocol and the UDP protocol. The TCP protocol is used to create, join, and leave games. The UDP protocol is used to send game information between the game server and clients.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
UDP Protocol</h1>
<p>The UDP game binary protocol is designed for transmitting game information between the game server and clients in a multiplayer shooter game. The protocol uses Asio for data compression and transmission. The protocol supports the transmission of player information, such as position, life, and shoot, as well as enemy information and other player information.</p>
<h1><a class="anchor" id="autotoc_md6"></a>
Data Types</h1>
<p>The UDP game binary protocol uses strings encoded in bytes to transmit data. The protocol uses the following data types</p>
<h1><a class="anchor" id="autotoc_md7"></a>
Data Structure</h1>
<pre class="fragment">player:
    id: int
    x: int
    y: int
    colliderX: int
    colliderY: int
    life: int
    speed: int
    damage: int

enemy:
    id: int
    x: int
    y: int
    colliderX: int
    colliderY: int
    life: int
    speed: int
    damage: int
    type: int
    rotation: int
    fireRate: int
    waypoints: list of pair of int

update:
    player: 
        id: int
        x: int
        y: int
        life: int
    enemy:
        id: int
        x: int
        y: int
        life: int
        rotation: int

Shoot:
    playerID: int

Dead:
    playerID: int

Wave:
    wave: int

Level:
    level: int

Chat:
    playerID: int
    message: string
</pre><p> every keywords should be space separated and every data should be separated by a double point</p>
<p>exemple: Update enemy 0:1920:840:33</p>
<h1><a class="anchor" id="autotoc_md8"></a>
Client commands</h1>
<pre class="fragment">Update: 
    Inform the server about the player position and life
    exemple: Update 0:1920:840:33

Shoot:
    Inform the server that the player shoot
    exemple: Shoot 0

Dead:
    SInform the server about the death of a player with the id of the player
    exemple: Dead 0

Collision:
    Inform the server about the collision of a shoot and an enemy with the id of the enemy
    exemple: Collision 0

Before Game Start:
    Create:
        Inform the UDP server that the player want to create a game
        Create
        the server return "Vu\n"

    Join:
        Inform the UDP server that the player want to join a game
        Join
        the server return "Vu\n"

    Leave:
        Inform the UDP server that the player want to leave a game
        Leave
        the server return "Vu\n"

    Start:
        Send it to tell the server to start the game
        Start

    Type:
        Send it to change the game Mode (1 for classic and 2 for survival)
        Type gameMode
        exemple: Type 1

    Chat:
        Send it to send a message to the other player
        Chat playerID message
        exemple: Chat 0 hello world
</pre> <h1><a class="anchor" id="autotoc_md9"></a>
Data Transmission</h1>
<pre class="fragment">Update on enemies are sent every 20 ms
Update on players are sent every 100 ms
Shoot are sent when the player shoot
Dead are sent when the player die
Collision are sent when a shoot hit an enemy
</pre><h1><a class="anchor" id="autotoc_md10"></a>
Error Handling</h1>
<p>The UDP game binary protocol does not include any built-in error handling mechanisms. It is up to the implementation to detect and handle any errors that may occur during the transmission of data.</p>
<h1><a class="anchor" id="autotoc_md11"></a>
TCP Protocol</h1>
<p>in tcp you can only can do this commands to the server be carful the terme "game" is a udp server that have a special protocol refer to the udp protocol to communicate with the game server part. </p><pre class="fragment">create a game commande that gonna create a game and return the id of the newely added game. the "game" is a udp server that have a special protocol refer to the udp protocol.

    client send :  "create" 
    server send :  "created &lt;id&gt;" if there is a creation error the server gonna send "error &lt;reason&gt;"


join a game commande that gonna join a game and return if you have manage to connect and if not why.

    client send :  "join &lt;id&gt;"
    server send :  "joined" if the game is full or the game or you are already in a other game is not exist the server gonna send "full" or "not exist" or "alrady in a game" if there other type of error the server gonna send "error &lt;reason&gt;"

leave a game commande that gonna leave a game and return if you have manage to leave and if not why.

    client send :  "leave"
    server send :  "left" if you are not in the game the server gonna send "not in game" if there other type of error the server gonna send "error &lt;reason&gt;"

start a game commande that gonna start a game and return if you have manage to start and if not why.

    client send :  "start"
    server send :  "started" if you are not in a game the server gonna send "not in game" if there other type of error the server gonna send "error &lt;reason&gt;"

list all the room available

    client send :  "list"
    server send :  "list &lt;id&gt; &lt;id&gt; &lt;id&gt; &lt;id&gt; &lt;id&gt; &lt;id&gt; &lt;id&gt; &lt;id&gt; &lt;id&gt; &lt;id&gt;" if there is no room the server gonna send an empty list if there other type of error the server gonna send "error &lt;reason&gt;"

when the game end you gonna recieve a message from the server that gonna the game gonna be delete dont try to reconnect to the same id.

    server send :  "end" if there other type of error the server gonna send "endError &lt;reason&gt;" that mean the game have been delete cause of an error   


every unknown command gonna be responded by the server with "error command not found"
if you are solo in a room and leave the room the room gonna be deleted. also you cant create more than 1 room at the same time per client.
</pre> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
